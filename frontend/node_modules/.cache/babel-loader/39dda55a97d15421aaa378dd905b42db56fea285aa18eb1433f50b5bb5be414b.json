{"ast":null,"code":"import BilibiliTotalView from \"@/components/BilibiliTotalView\";\nimport BilibiliTotalVideo from \"@/components/BilibiliTotalVideo\";\nimport BilibiliTotalLike from \"@/components/BilibiliTotalLike\";\nimport BilibiliTotalComment from \"@/components/BilibiliTotalComment\";\nimport BilibiliTotalShare from \"@/components/BilibiliTotalShare\";\nimport BilibiliTotalDanmu from \"@/components/BilibiliTotalDanmu\";\nimport BilibiliTotalCoin from \"@/components/BilibiliTotalCoin\";\nimport BilibiliTotalCollect from \"@/components/BilibiliTotalCollect\";\nimport BilibiliTotalEngagement from \"@/components/BilibiliTotalEngagement\";\nexport default {\n  name: \"Bilibili\",\n  components: {\n    BilibiliTotalEngagement,\n    BilibiliTotalCollect,\n    BilibiliTotalCoin,\n    BilibiliTotalDanmu,\n    BilibiliTotalShare,\n    BilibiliTotalComment,\n    BilibiliTotalLike,\n    BilibiliTotalVideo,\n    BilibiliTotalView\n  },\n  data() {\n    return {\n      page: 1,\n      perPage: 20,\n      //video info\n      videos: [],\n      sort: \"\",\n      total_posts_count: \"\",\n      select_items: [\"Date(Default)\", \"Most Likes\", \"Most Comments\", \"Most Coins\", \"Most Collects\", \"Most Shares\", \"Most Danmus\", \"Most Views\"],\n      subTotalNum: \"\",\n      eng_rate: \"\"\n    };\n  },\n  methods: {\n    async getBilibiliPost() {\n      const {\n        data\n      } = await this.axios.get('http://localhost/api/bilibili/post?' + 'page=' + this.page + '&limit=' + this.perPage + '&sort=' + this.sort);\n      this.page = data[\"page\"];\n      this.sort = data[\"sort\"];\n      this.total_posts_count = data[\"total_posts_count\"];\n      this.videos = data[\"posts\"];\n      // console.log(this.videos)\n\n      let SubTotals = {};\n      let columns = ['coin', 'collect', 'like', 'comment', 'share', 'danmu'];\n      this.videos.forEach(b => {\n        let rowTotal = 0;\n        columns.forEach(i => {\n          if (b[i] === undefined) {\n            return;\n          }\n          SubTotals[i] = SubTotals[i] || 0;\n          SubTotals[i] += b[i];\n          rowTotal += b[i];\n        });\n        b.RowTotal = rowTotal;\n      });\n\n      // Calculate RowTotal for ColumnsTotals\n      columns.forEach(i => {\n        SubTotals.RowTotal = SubTotals.RowTotal || 0;\n        SubTotals.RowTotal += SubTotals[i];\n      });\n      this.subTotalNum = SubTotals.RowTotal;\n      console.log(this.subTotalNum);\n    },\n    loadMore() {\n      this.page++;\n      if (this.perPage * this.page <= this.total_posts_count) {\n        this.getBilibiliPost();\n      }\n    },\n    previousPage() {\n      this.page--;\n      if (this.perPage * this.page <= this.total_posts_count) {\n        this.getBilibiliPost();\n      }\n    },\n    filterSort() {\n      if (this.selected_cat === 'Most Likes') {\n        this.page = 1;\n        this.sort = 'like';\n        this.getBilibiliPost();\n      } else if (this.selected_cat === 'Most Comments') {\n        this.page = 1;\n        this.sort = 'comment';\n        this.getBilibiliPost();\n      } else if (this.selected_cat === 'Date(Default)') {\n        this.page = 1;\n        this.sort = 'date';\n        this.getBilibiliPost();\n      } else if (this.selected_cat === 'Most Shares') {\n        this.page = 1;\n        this.sort = 'share';\n        this.getBilibiliPost();\n      } else if (this.selected_cat === 'Most Coins') {\n        this.page = 1;\n        this.sort = 'coin';\n        this.getBilibiliPost();\n      } else if (this.selected_cat === 'Most Collects') {\n        this.page = 1;\n        this.sort = 'collect';\n        this.getBilibiliPost();\n      } else if (this.selected_cat === 'Most Danmus') {\n        this.page = 1;\n        this.sort = 'danmu';\n        this.getBilibiliPost();\n      } else if (this.selected_cat === 'Most Views') {\n        this.page = 1;\n        this.sort = 'view';\n        this.getBilibiliPost();\n      }\n    }\n  },\n  created() {\n    this.getBilibiliPost();\n    this.loadMore();\n    this.previousPage();\n    this.filterSort();\n  },\n  filters: {\n    truncateText: text => {\n      if (text.length > 8) {\n        text = text.substring(0, 8) + \"...\";\n      }\n      return text;\n    },\n    formatNumber: function (num) {\n      if (String(num).length < 4) {\n        return num;\n      } else if (String(num).length < 7) {\n        return Math.floor(num / 1000) + 'K';\n      } else if (String(num).length < 10) {\n        return Math.floor(num / 1000000) + 'M';\n      } else {\n        return Math.floor(num / 1000000000) + 'B';\n      }\n    }\n  }\n};","map":{"version":3,"names":["BilibiliTotalView","BilibiliTotalVideo","BilibiliTotalLike","BilibiliTotalComment","BilibiliTotalShare","BilibiliTotalDanmu","BilibiliTotalCoin","BilibiliTotalCollect","BilibiliTotalEngagement","name","components","data","page","perPage","videos","sort","total_posts_count","select_items","subTotalNum","eng_rate","methods","getBilibiliPost","axios","get","SubTotals","columns","forEach","b","rowTotal","i","undefined","RowTotal","console","log","loadMore","previousPage","filterSort","selected_cat","created","filters","truncateText","text","length","substring","formatNumber","num","String","Math","floor"],"sources":["src/views/Bilibili.vue"],"sourcesContent":["<template>\r\n  <div class=\"main-content\">\r\n    <div class=\"section-stats\">\r\n      <div class=\"row align-items-center\">\r\n        <div class=\"col-xxl-12 col-xl-12 col-lg-12\">\r\n          <div class=\"row\">\r\n            <div class=\"col-lg-4\">\r\n              <div class=\"chart-box\" id=\"bilibili-total-video\">\r\n                <div class=\"section-header\">\r\n                  <v-img\r\n                      src=\"https://mishkan-ltd.s3.ap-northeast-2.amazonaws.com/web-img/bilibili-logo.svg\"\r\n                      max-height=\"30px\"\r\n                      max-width=\"30px\"\r\n                      class=\"mr-3\"\r\n                  ></v-img>\r\n                  <span>\r\n                      {{ $t(\"Bilibili Total Videos\") }}\r\n                      <v-tooltip bottom color=\"grey lighten-4\">\r\n                        <template v-slot:activator=\"{ on, attrs }\">\r\n                          <v-icon\r\n                              color=\"primary\"\r\n                              v-bind=\"attrs\"\r\n                              v-on=\"on\"\r\n                          >\r\n                          mdi-information-outline\r\n                          </v-icon>\r\n                        </template>\r\n                        <span>{{ $t(\"Number of related (keyword) videos on Bilibili\") }}</span>\r\n                      </v-tooltip>\r\n                    </span>\r\n                </div>\r\n                <BilibiliTotalVideo/>\r\n              </div>\r\n            </div>\r\n            <div class=\"col-lg-4\">\r\n              <div class=\"chart-box\" id=\"bilibili-total-view\">\r\n                <div class=\"section-header\">\r\n                  <v-img\r\n                      src=\"https://mishkan-ltd.s3.ap-northeast-2.amazonaws.com/web-img/bilibili-logo.svg\"\r\n                      max-height=\"30px\"\r\n                      max-width=\"30px\"\r\n                      class=\"mr-3\"\r\n                  ></v-img>\r\n                  <span>\r\n                      {{ $t(\"Bilibili Total Views\") }}\r\n                      <v-tooltip bottom color=\"grey lighten-4\">\r\n                        <template v-slot:activator=\"{ on, attrs }\">\r\n                          <v-icon\r\n                              color=\"primary\"\r\n                              v-bind=\"attrs\"\r\n                              v-on=\"on\"\r\n                          >\r\n                          mdi-information-outline\r\n                          </v-icon>\r\n                        </template>\r\n                        <span>{{ $t(\"Number of related (keyword) video views on Bilibili\") }}</span>\r\n                      </v-tooltip>\r\n                    </span>\r\n                </div>\r\n                <BilibiliTotalView/>\r\n              </div>\r\n            </div>\r\n            <div class=\"col-lg-4\">\r\n              <div class=\"chart-box\" id=\"bilibili-total-like\">\r\n                <div class=\"section-header\">\r\n                  <v-img\r\n                      src=\"https://mishkan-ltd.s3.ap-northeast-2.amazonaws.com/web-img/bilibili-logo.svg\"\r\n                      max-height=\"30px\"\r\n                      max-width=\"30px\"\r\n                      class=\"mr-3\"\r\n                  ></v-img>\r\n                  <span>\r\n                      {{ $t(\"Bilibili Total Likes\") }}\r\n                      <v-tooltip bottom color=\"grey lighten-4\">\r\n                        <template v-slot:activator=\"{ on, attrs }\">\r\n                          <v-icon\r\n                              color=\"primary\"\r\n                              v-bind=\"attrs\"\r\n                              v-on=\"on\"\r\n                          >\r\n                          mdi-information-outline\r\n                          </v-icon>\r\n                        </template>\r\n                        <span>{{ $t(\"Number of related (keyword) video likes on Bilibili\") }}</span>\r\n                      </v-tooltip>\r\n                    </span>\r\n                </div>\r\n                <BilibiliTotalLike/>\r\n              </div>\r\n            </div>\r\n            <div class=\"col-lg-4\">\r\n              <div class=\"chart-box\" id=\"bilibili-total-comment\">\r\n                <div class=\"section-header\">\r\n                  <v-img\r\n                      src=\"https://mishkan-ltd.s3.ap-northeast-2.amazonaws.com/web-img/bilibili-logo.svg\"\r\n                      max-height=\"30px\"\r\n                      max-width=\"30px\"\r\n                      class=\"mr-3\"\r\n                  ></v-img>\r\n                  <span>\r\n                      {{ $t(\"Bilibili Total Comments\") }}\r\n                      <v-tooltip bottom color=\"grey lighten-4\">\r\n                        <template v-slot:activator=\"{ on, attrs }\">\r\n                          <v-icon\r\n                              color=\"primary\"\r\n                              v-bind=\"attrs\"\r\n                              v-on=\"on\"\r\n                          >\r\n                          mdi-information-outline\r\n                          </v-icon>\r\n                        </template>\r\n                        <span>{{ $t(\"Number of related (keyword) video comments on Bilibili\") }}</span>\r\n                      </v-tooltip>\r\n                    </span>\r\n                </div>\r\n                <BilibiliTotalComment/>\r\n              </div>\r\n            </div>\r\n            <div class=\"col-lg-4\">\r\n              <div class=\"chart-box\" id=\"bilibili-total-share\">\r\n                <div class=\"section-header\">\r\n                  <v-img\r\n                      src=\"https://mishkan-ltd.s3.ap-northeast-2.amazonaws.com/web-img/bilibili-logo.svg\"\r\n                      max-height=\"30px\"\r\n                      max-width=\"30px\"\r\n                      class=\"mr-3\"\r\n                  ></v-img>\r\n                  <span>\r\n                      {{ $t(\"Bilibili Total Shares\") }}\r\n                      <v-tooltip bottom color=\"grey lighten-4\">\r\n                        <template v-slot:activator=\"{ on, attrs }\">\r\n                          <v-icon\r\n                              color=\"primary\"\r\n                              v-bind=\"attrs\"\r\n                              v-on=\"on\"\r\n                          >\r\n                          mdi-information-outline\r\n                          </v-icon>\r\n                        </template>\r\n                        <span>{{ $t(\"Number of related (keyword) video shares on Bilibili\") }}</span>\r\n                      </v-tooltip>\r\n                    </span>\r\n                </div>\r\n                <BilibiliTotalShare/>\r\n              </div>\r\n            </div>\r\n            <div class=\"col-lg-4\">\r\n              <div class=\"chart-box\" id=\"bilibili-total-danmu\">\r\n                <div class=\"section-header\">\r\n                  <v-img\r\n                      src=\"https://mishkan-ltd.s3.ap-northeast-2.amazonaws.com/web-img/bilibili-logo.svg\"\r\n                      max-height=\"30px\"\r\n                      max-width=\"30px\"\r\n                      class=\"mr-3\"\r\n                  ></v-img>\r\n                  <span>\r\n                      {{ $t(\"Bilibili Total Bullet Chats\") }}\r\n                      <v-tooltip bottom color=\"grey lighten-4\">\r\n                        <template v-slot:activator=\"{ on, attrs }\">\r\n                          <v-icon\r\n                              color=\"primary\"\r\n                              v-bind=\"attrs\"\r\n                              v-on=\"on\"\r\n                          >\r\n                          mdi-information-outline\r\n                          </v-icon>\r\n                        </template>\r\n                        <span>{{ $t(\"Number of related (keyword) video bullet chats on Bilibili\") }}</span>\r\n                      </v-tooltip>\r\n                    </span>\r\n                </div>\r\n                <BilibiliTotalDanmu/>\r\n              </div>\r\n            </div>\r\n            <div class=\"col-lg-4\">\r\n              <div class=\"chart-box\" id=\"bilibili-total-coin\">\r\n                <div class=\"section-header\">\r\n                  <v-img\r\n                      src=\"https://mishkan-ltd.s3.ap-northeast-2.amazonaws.com/web-img/bilibili-logo.svg\"\r\n                      max-height=\"30px\"\r\n                      max-width=\"30px\"\r\n                      class=\"mr-3\"\r\n                  ></v-img>\r\n                  <span>\r\n                      {{ $t(\"Bilibili Total Coins\") }}\r\n                      <v-tooltip bottom color=\"grey lighten-4\">\r\n                        <template v-slot:activator=\"{ on, attrs }\">\r\n                          <v-icon\r\n                              color=\"primary\"\r\n                              v-bind=\"attrs\"\r\n                              v-on=\"on\"\r\n                          >\r\n                          mdi-information-outline\r\n                          </v-icon>\r\n                        </template>\r\n                        <span>{{ $t(\"Number of related (keyword) video coins on Bilibili\") }}</span>\r\n                      </v-tooltip>\r\n                    </span>\r\n                </div>\r\n                <BilibiliTotalCoin/>\r\n              </div>\r\n            </div>\r\n            <div class=\"col-lg-4\">\r\n              <div class=\"chart-box\" id=\"bilibili-total-collect\">\r\n                <div class=\"section-header\">\r\n                  <v-img\r\n                      src=\"https://mishkan-ltd.s3.ap-northeast-2.amazonaws.com/web-img/bilibili-logo.svg\"\r\n                      max-height=\"30px\"\r\n                      max-width=\"30px\"\r\n                      class=\"mr-3\"\r\n                  ></v-img>\r\n                  <span>\r\n                      {{ $t(\"Bilibili Total Collects\") }}\r\n                      <v-tooltip bottom color=\"grey lighten-4\">\r\n                        <template v-slot:activator=\"{ on, attrs }\">\r\n                          <v-icon\r\n                              color=\"primary\"\r\n                              v-bind=\"attrs\"\r\n                              v-on=\"on\"\r\n                          >\r\n                          mdi-information-outline\r\n                          </v-icon>\r\n                        </template>\r\n                        <span>{{ $t(\"Number of related (keyword) video collects on Bilibili\") }}</span>\r\n                      </v-tooltip>\r\n                    </span>\r\n                </div>\r\n                <BilibiliTotalCollect/>\r\n              </div>\r\n            </div>\r\n            <div class=\"col-lg-4\">\r\n              <div class=\"chart-box\" id=\"bilibili-total-engagement-chart\">\r\n                <div class=\"section-header\">\r\n                  <v-img\r\n                      src=\"https://mishkan-ltd.s3.ap-northeast-2.amazonaws.com/web-img/bilibili-logo.svg\"\r\n                      max-height=\"30px\"\r\n                      max-width=\"30px\"\r\n                      class=\"mr-3\"\r\n                  ></v-img>\r\n                  <span>\r\n                      {{ $t(\"Bilibili Engagement Rate\") }}\r\n                      <v-tooltip bottom color=\"grey lighten-4\">\r\n                        <template v-slot:activator=\"{ on, attrs }\">\r\n                          <v-icon\r\n                              color=\"primary\"\r\n                              v-bind=\"attrs\"\r\n                              v-on=\"on\"\r\n                          >\r\n                          mdi-information-outline\r\n                          </v-icon>\r\n                        </template>\r\n                        <span>{{ $t(\"Average engagement rate of related (keyword) videos on Bilibili\") }}</span>\r\n                      </v-tooltip>\r\n                    </span>\r\n                </div>\r\n                <BilibiliTotalEngagement/>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"section-campaign\">\r\n      <div class=\"section-title\">\r\n        <h2>{{ $t('Featured Videos') }}</h2>\r\n        <div class=\"filters\">\r\n          <v-row wrap justify=\"end\">\r\n            <v-col\r\n                cols=\"3\"\r\n            >\r\n              <v-select\r\n                  :items=\"select_items\"\r\n                  label=\"Sort By\"\r\n                  dense\r\n                  solo\r\n                  v-model=\"selected_cat\"\r\n                  @input=\"filterSort\"\r\n                  item-color=\"orange darken-1\"\r\n              ></v-select>\r\n            </v-col>\r\n          </v-row>\r\n        </div>\r\n      </div>\r\n      <div class=\"row\">\r\n        <div class=\"col-lg-3 col-md-6\" v-for=\"(video, index) in videos\"\r\n             v-if=\"index < total_posts_count\" :key=\"index\">\r\n          <div class=\"box\">\r\n            <div class=\"img\">\r\n              <div class=\"box-img\" v-if=\"video.image\" :style=\"{backgroundImage: 'url(' + video.image +')'}\">\r\n              </div>\r\n              <!--            <div class=\"box-img\"  v-else :style=\"{backgroundImage: 'url(' + 'https://mishkan-ltd.s3.ap-northeast-2.amazonaws.com/web-img/music-performance/no-image-available.png' +')'}\">-->\r\n              <!--            </div>-->\r\n            </div>\r\n            <div class=\"box-body\">\r\n              <a v-bind:href=\"video.url\" target=\"_blank\">\r\n                <div class=\"title\">\r\n                  <v-tooltip top color=\"grey lighten-4\" max-width=\"250px\">\r\n                    <template v-slot:activator=\"{ on, attrs }\">\r\n                      <h4 v-bind=\"attrs\" v-on=\"on\">{{ video.title | truncateText }}</h4>\r\n                    </template>\r\n                    <span> {{ video.title }}</span>\r\n                  </v-tooltip>\r\n                  <span><img src=\"@/assets/img/calendar-icon-red.svg\" alt=\"\"/>{{ video.upload_date }}</span>\r\n                </div>\r\n              </a>\r\n              <div class=\"infoStat\">\r\n                <ul>\r\n                  <v-tooltip bottom color=\"grey lighten-4\">\r\n                    <template v-slot:activator=\"{ on }\">\r\n                      <li class=\"stat4\" v-on=\"on\">{{ video.view | formatNumber }}</li>\r\n                    </template>\r\n                    <span>Views: {{ (video.view).toLocaleString() }}</span>\r\n                  </v-tooltip>\r\n                  <v-tooltip bottom color=\"grey lighten-4\">\r\n                    <template v-slot:activator=\"{ on }\">\r\n                      <li class=\"stat3\" v-on=\"on\">{{ video.like | formatNumber }}</li>\r\n                    </template>\r\n                    <span>Likes: {{ (video.like).toLocaleString() }}</span>\r\n                  </v-tooltip>\r\n                  <v-tooltip bottom color=\"grey lighten-4\">\r\n                    <template v-slot:activator=\"{ on }\">\r\n                      <li class=\"stat5\" v-on=\"on\">{{ video.share | formatNumber }}</li>\r\n                    </template>\r\n                    <span>Shares: {{ (video.share).toLocaleString() }}</span>\r\n                  </v-tooltip>\r\n                  <v-tooltip bottom color=\"grey lighten-4\">\r\n                    <template v-slot:activator=\"{ on }\">\r\n                      <li class=\"stat8\" v-on=\"on\">{{ video.coin | formatNumber }}</li>\r\n                    </template>\r\n                    <span>Coins: {{ (video.coin).toLocaleString() }}</span>\r\n                  </v-tooltip>\r\n                  <v-tooltip bottom color=\"grey lighten-4\">\r\n                    <template v-slot:activator=\"{ on }\">\r\n                      <li class=\"stat7\" v-on=\"on\">{{ video.danmu | formatNumber }}</li>\r\n                    </template>\r\n                    <span>Danmus: {{ (video.danmu).toLocaleString() }}</span>\r\n                  </v-tooltip>\r\n                  <v-tooltip bottom color=\"grey lighten-4\">\r\n                    <template v-slot:activator=\"{ on }\">\r\n                      <li class=\"stat1\" v-on=\"on\">{{ video.collect | formatNumber }}</li>\r\n                    </template>\r\n                    <span>Collects: {{ (video.collect).toLocaleString() }}</span>\r\n                  </v-tooltip>\r\n                </ul>\r\n                <span>\r\n                  {{ (video.RowTotal / video.view * 100).toFixed(2) }}\r\n                  <span>%</span>\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-12\">\r\n          <div class=\"button-block\">\r\n            <div class=\"filters\">\r\n              <v-row wrap justify=\"center\">\r\n                <v-col\r\n                    cols=\"4\"\r\n                >\r\n                  <v-btn\r\n                      class=\"button\"\r\n                      large\r\n                      icon\r\n                      :disabled=\"this.page === 1\"\r\n                      @click=\"previousPage()\"\r\n                  >\r\n                    <v-icon>\r\n                      mdi-chevron-left\r\n                    </v-icon>\r\n                  </v-btn>\r\n                  <v-btn\r\n                      class=\"button\"\r\n                      large\r\n                      icon\r\n                      @click=\"loadMore()\"\r\n                      :disabled=\"this.page === (this.total_posts_count / this.perPage) + 1\"\r\n                  >\r\n                    <v-icon>\r\n                      mdi-chevron-right\r\n                    </v-icon>\r\n                  </v-btn>\r\n                </v-col>\r\n              </v-row>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport BilibiliTotalView from \"@/components/BilibiliTotalView\";\r\nimport BilibiliTotalVideo from \"@/components/BilibiliTotalVideo\";\r\nimport BilibiliTotalLike from \"@/components/BilibiliTotalLike\";\r\nimport BilibiliTotalComment from \"@/components/BilibiliTotalComment\";\r\nimport BilibiliTotalShare from \"@/components/BilibiliTotalShare\";\r\nimport BilibiliTotalDanmu from \"@/components/BilibiliTotalDanmu\";\r\nimport BilibiliTotalCoin from \"@/components/BilibiliTotalCoin\";\r\nimport BilibiliTotalCollect from \"@/components/BilibiliTotalCollect\";\r\nimport BilibiliTotalEngagement from \"@/components/BilibiliTotalEngagement\";\r\nexport default {\r\n  name: \"Bilibili\",\r\n    components: {\r\n    BilibiliTotalEngagement,\r\n    BilibiliTotalCollect,\r\n    BilibiliTotalCoin,\r\n    BilibiliTotalDanmu,\r\n    BilibiliTotalShare, BilibiliTotalComment, BilibiliTotalLike, BilibiliTotalVideo, BilibiliTotalView},\r\n  data() {\r\n    return {\r\n      page: 1,\r\n      perPage: 20,\r\n\r\n      //video info\r\n      videos: [],\r\n      sort: \"\",\r\n      total_posts_count: \"\",\r\n      select_items: [\"Date(Default)\", \"Most Likes\", \"Most Comments\", \"Most Coins\", \"Most Collects\", \"Most Shares\",\r\n                     \"Most Danmus\", \"Most Views\"],\r\n      subTotalNum: \"\",\r\n      eng_rate: \"\"\r\n    }\r\n  },\r\n  methods: {\r\n    async getBilibiliPost() {\r\n      const {data} = await this.axios.get('http://localhost/api/bilibili/post?' + 'page=' + this.page + '&limit=' + this.perPage + '&sort=' + this.sort)\r\n      this.page = data[\"page\"]\r\n      this.sort = data[\"sort\"]\r\n      this.total_posts_count = data[\"total_posts_count\"]\r\n      this.videos = data[\"posts\"]\r\n      // console.log(this.videos)\r\n\r\n      let SubTotals = {};\r\n      let columns = ['coin', 'collect', 'like', 'comment', 'share', 'danmu'];\r\n\r\n      this.videos.forEach(b => {\r\n        let rowTotal = 0;\r\n        columns.forEach(i => {\r\n          if (b[i] === undefined) {\r\n            return;\r\n          }\r\n\r\n          SubTotals[i] = SubTotals[i] || 0;\r\n          SubTotals[i] += b[i];\r\n          rowTotal += b[i];\r\n        })\r\n        b.RowTotal = rowTotal;\r\n      });\r\n\r\n      // Calculate RowTotal for ColumnsTotals\r\n      columns.forEach(i => {\r\n        SubTotals.RowTotal = SubTotals.RowTotal || 0;\r\n        SubTotals.RowTotal += SubTotals[i];\r\n      })\r\n      this.subTotalNum = SubTotals.RowTotal\r\n      console.log(this.subTotalNum)\r\n    },\r\n    loadMore() {\r\n      this.page++;\r\n      if ((this.perPage * this.page) <= this.total_posts_count) {\r\n        this.getBilibiliPost();\r\n      }\r\n    },\r\n    previousPage() {\r\n      this.page--\r\n      if ((this.perPage * this.page) <= this.total_posts_count) {\r\n        this.getBilibiliPost();\r\n      }\r\n    },\r\n    filterSort() {\r\n      if (this.selected_cat === 'Most Likes') {\r\n        this.page = 1\r\n        this.sort = 'like'\r\n        this.getBilibiliPost();\r\n      } else if (this.selected_cat === 'Most Comments') {\r\n        this.page = 1\r\n        this.sort = 'comment'\r\n        this.getBilibiliPost();\r\n      } else if (this.selected_cat === 'Date(Default)') {\r\n        this.page = 1\r\n        this.sort = 'date'\r\n        this.getBilibiliPost();\r\n      } else if (this.selected_cat === 'Most Shares') {\r\n        this.page = 1\r\n        this.sort = 'share'\r\n        this.getBilibiliPost();\r\n      } else if (this.selected_cat === 'Most Coins') {\r\n        this.page = 1\r\n        this.sort = 'coin'\r\n        this.getBilibiliPost();\r\n      } else if (this.selected_cat === 'Most Collects') {\r\n        this.page = 1\r\n        this.sort = 'collect'\r\n        this.getBilibiliPost();\r\n      } else if (this.selected_cat === 'Most Danmus') {\r\n        this.page = 1\r\n        this.sort = 'danmu'\r\n        this.getBilibiliPost();\r\n      } else if (this.selected_cat === 'Most Views') {\r\n        this.page = 1\r\n        this.sort = 'view'\r\n        this.getBilibiliPost();\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.getBilibiliPost();\r\n    this.loadMore();\r\n    this.previousPage();\r\n    this.filterSort();\r\n  },\r\n  filters:{\r\n    truncateText: (text) => {\r\n      if (text.length > 8) {\r\n        text = text.substring(0, 8) + \"...\";\r\n      }\r\n      return text;\r\n    },\r\n    formatNumber: function (num) {\r\n      if (String(num).length < 4) {\r\n        return num;\r\n      } else if (String(num).length < 7) {\r\n        return Math.floor(num / 1000) + 'K';\r\n      } else if (String(num).length < 10) {\r\n        return Math.floor(num / 1000000) + 'M';\r\n      } else {\r\n        return Math.floor(num / 1000000000) + 'B';\r\n      }\r\n    }\r\n  },\r\n}\r\n</script>\r\n<style scoped>\r\n.box .img {\r\n  position: relative;\r\n  margin: auto;\r\n  overflow: hidden;\r\n  width: auto;\r\n  border-radius: 8px;\r\n}\r\n.box .img .box-img {\r\n  max-width: 100%;\r\n  transition: all 0.3s;\r\n  display: block;\r\n  width: 100%;\r\n  height: auto;\r\n  transform: scale(1);\r\n}\r\n.box .img .box-img:hover {\r\n  border-radius: 8px;\r\n  transform: scale(1.1);\r\n}\r\n.chart-box {\r\n  width:100%;\r\n  height: 100%;\r\n  padding: 20px 10px;\r\n  background-color: #fff;\r\n  border: 1px solid #ddd;\r\n  border-radius: 8px;\r\n  -webkit-border-radius: 8px;\r\n}\r\n</style>"],"mappings":"AAuYA,OAAAA,iBAAA;AACA,OAAAC,kBAAA;AACA,OAAAC,iBAAA;AACA,OAAAC,oBAAA;AACA,OAAAC,kBAAA;AACA,OAAAC,kBAAA;AACA,OAAAC,iBAAA;AACA,OAAAC,oBAAA;AACA,OAAAC,uBAAA;AACA;EACAC,IAAA;EACAC,UAAA;IACAF,uBAAA;IACAD,oBAAA;IACAD,iBAAA;IACAD,kBAAA;IACAD,kBAAA;IAAAD,oBAAA;IAAAD,iBAAA;IAAAD,kBAAA;IAAAD;EAAA;EACAW,KAAA;IACA;MACAC,IAAA;MACAC,OAAA;MAEA;MACAC,MAAA;MACAC,IAAA;MACAC,iBAAA;MACAC,YAAA,iGACA;MACAC,WAAA;MACAC,QAAA;IACA;EACA;EACAC,OAAA;IACA,MAAAC,gBAAA;MACA;QAAAV;MAAA,eAAAW,KAAA,CAAAC,GAAA,wDAAAX,IAAA,oBAAAC,OAAA,mBAAAE,IAAA;MACA,KAAAH,IAAA,GAAAD,IAAA;MACA,KAAAI,IAAA,GAAAJ,IAAA;MACA,KAAAK,iBAAA,GAAAL,IAAA;MACA,KAAAG,MAAA,GAAAH,IAAA;MACA;;MAEA,IAAAa,SAAA;MACA,IAAAC,OAAA;MAEA,KAAAX,MAAA,CAAAY,OAAA,CAAAC,CAAA;QACA,IAAAC,QAAA;QACAH,OAAA,CAAAC,OAAA,CAAAG,CAAA;UACA,IAAAF,CAAA,CAAAE,CAAA,MAAAC,SAAA;YACA;UACA;UAEAN,SAAA,CAAAK,CAAA,IAAAL,SAAA,CAAAK,CAAA;UACAL,SAAA,CAAAK,CAAA,KAAAF,CAAA,CAAAE,CAAA;UACAD,QAAA,IAAAD,CAAA,CAAAE,CAAA;QACA;QACAF,CAAA,CAAAI,QAAA,GAAAH,QAAA;MACA;;MAEA;MACAH,OAAA,CAAAC,OAAA,CAAAG,CAAA;QACAL,SAAA,CAAAO,QAAA,GAAAP,SAAA,CAAAO,QAAA;QACAP,SAAA,CAAAO,QAAA,IAAAP,SAAA,CAAAK,CAAA;MACA;MACA,KAAAX,WAAA,GAAAM,SAAA,CAAAO,QAAA;MACAC,OAAA,CAAAC,GAAA,MAAAf,WAAA;IACA;IACAgB,SAAA;MACA,KAAAtB,IAAA;MACA,SAAAC,OAAA,QAAAD,IAAA,SAAAI,iBAAA;QACA,KAAAK,eAAA;MACA;IACA;IACAc,aAAA;MACA,KAAAvB,IAAA;MACA,SAAAC,OAAA,QAAAD,IAAA,SAAAI,iBAAA;QACA,KAAAK,eAAA;MACA;IACA;IACAe,WAAA;MACA,SAAAC,YAAA;QACA,KAAAzB,IAAA;QACA,KAAAG,IAAA;QACA,KAAAM,eAAA;MACA,gBAAAgB,YAAA;QACA,KAAAzB,IAAA;QACA,KAAAG,IAAA;QACA,KAAAM,eAAA;MACA,gBAAAgB,YAAA;QACA,KAAAzB,IAAA;QACA,KAAAG,IAAA;QACA,KAAAM,eAAA;MACA,gBAAAgB,YAAA;QACA,KAAAzB,IAAA;QACA,KAAAG,IAAA;QACA,KAAAM,eAAA;MACA,gBAAAgB,YAAA;QACA,KAAAzB,IAAA;QACA,KAAAG,IAAA;QACA,KAAAM,eAAA;MACA,gBAAAgB,YAAA;QACA,KAAAzB,IAAA;QACA,KAAAG,IAAA;QACA,KAAAM,eAAA;MACA,gBAAAgB,YAAA;QACA,KAAAzB,IAAA;QACA,KAAAG,IAAA;QACA,KAAAM,eAAA;MACA,gBAAAgB,YAAA;QACA,KAAAzB,IAAA;QACA,KAAAG,IAAA;QACA,KAAAM,eAAA;MACA;IACA;EACA;EACAiB,QAAA;IACA,KAAAjB,eAAA;IACA,KAAAa,QAAA;IACA,KAAAC,YAAA;IACA,KAAAC,UAAA;EACA;EACAG,OAAA;IACAC,YAAA,EAAAC,IAAA;MACA,IAAAA,IAAA,CAAAC,MAAA;QACAD,IAAA,GAAAA,IAAA,CAAAE,SAAA;MACA;MACA,OAAAF,IAAA;IACA;IACAG,YAAA,WAAAA,CAAAC,GAAA;MACA,IAAAC,MAAA,CAAAD,GAAA,EAAAH,MAAA;QACA,OAAAG,GAAA;MACA,WAAAC,MAAA,CAAAD,GAAA,EAAAH,MAAA;QACA,OAAAK,IAAA,CAAAC,KAAA,CAAAH,GAAA;MACA,WAAAC,MAAA,CAAAD,GAAA,EAAAH,MAAA;QACA,OAAAK,IAAA,CAAAC,KAAA,CAAAH,GAAA;MACA;QACA,OAAAE,IAAA,CAAAC,KAAA,CAAAH,GAAA;MACA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}