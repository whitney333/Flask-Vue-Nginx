{"ast":null,"code":"import InstagramFollower from \"@/components/InstagramFollower\";\nimport InstagramTotalPost from \"@/components/InstagramTotalPost\";\nimport InstagramTotalLike from \"@/components/InstagramTotalLike\";\nimport InstagramTotalComment from \"@/components/InstagramTotalComment\";\nimport InstagramTotalEngagement from \"@/components/InstagramTotalEngagement\";\nimport InstagramMostUsedHashtag from \"@/components/InstagramMostUsedHashtag\";\nimport InstagramMostEngagedHashtag from \"@/components/InstagramMostEngagedHashtag\";\nimport InstagramThreadsFollower from \"@/components/InstagramThreadsFollower\";\nexport default {\n  name: \"Instagram\",\n  components: {\n    InstagramThreadsFollower,\n    InstagramMostEngagedHashtag,\n    InstagramMostUsedHashtag,\n    InstagramTotalEngagement,\n    InstagramTotalComment,\n    InstagramTotalLike,\n    InstagramTotalPost,\n    InstagramFollower\n  },\n  data() {\n    return {\n      InstaPost: [],\n      page: 1,\n      perPage: 16,\n      sort: \"\",\n      selected_cat: \"\",\n      allLoaded: false,\n      total_posts_count: \"\",\n      subTotalNum: \"\",\n      current_follower: \"\",\n      past_follower: \"\",\n      current_media: \"\",\n      past_media: \"\",\n      update_date: \"\",\n      select_items: [\"Date(Default)\", \"Most Likes\", \"Most Comments\", \"Most Engaged\"]\n    };\n  },\n  methods: {\n    async getInstaPost() {\n      const {\n        data\n      } = await this.axios.get('http://localhost/api/instagram/post?' + 'page=' + this.page + '&limit=' + this.perPage + '&sort=' + this.sort);\n      this.page = data[\"result\"][\"page\"];\n      this.sort = data[\"result\"][\"sort\"];\n      this.total_posts_count = data[\"result\"][\"total_posts_count\"];\n      this.InstaPost = data[\"result\"][\"posts\"];\n      // console.log(this.sort)\n      //calculate subtotals\n      const SubTotals = {};\n      const columns = ['comment_count', 'like_count'];\n      this.InstaPost.forEach(b => {\n        let rowTotal = 0;\n        columns.forEach(i => {\n          if (b[i] === undefined) {\n            return;\n          }\n          SubTotals[i] = SubTotals[i] || 0;\n          SubTotals[i] += b[i];\n          rowTotal += b[i];\n        });\n        b.RowTotal = rowTotal;\n      });\n\n      // Calculate RowTotal for ColumnsTotals\n      columns.forEach(i => {\n        SubTotals.RowTotal = SubTotals.RowTotal || 0;\n        SubTotals.RowTotal += SubTotals[i];\n      });\n      this.subTotalNum = SubTotals.RowTotal;\n      // console.log(this.subTotalNum)\n    },\n\n    async getIndex() {\n      const {\n        data\n      } = await this.axios.get(\"http://localhost/api/instagram/index\");\n      this.current_follower = data[\"result\"][0][\"follower_count\"];\n      this.past_follower = data[\"result\"][6][\"follower_count\"];\n      this.current_media = data[\"result\"][0][\"media_count\"];\n      this.past_media = data[\"result\"][6][\"media_count\"];\n      this.update_date = data[\"result\"][0][\"date\"];\n      // console.log(this.current_follower)\n    },\n\n    loadMore() {\n      this.page++;\n      let total_page = Math.ceil(this.total_posts_count / this.perPage);\n      // console.log(total_page)\n      if (this.page <= total_page) {\n        this.getInstaPost();\n      }\n    },\n    previousPage() {\n      this.page--;\n      let total_page = Math.ceil(this.total_posts_count / this.perPage);\n      if (this.page <= total_page) {\n        this.getInstaPost();\n      }\n    },\n    filterSort() {\n      if (this.selected_cat === 'Most Likes') {\n        this.page = 1;\n        this.sort = 'like';\n        this.getInstaPost();\n      } else if (this.selected_cat === 'Most Comments') {\n        this.page = 1;\n        this.sort = 'comment';\n        this.getInstaPost();\n      } else if (this.selected_cat === 'Date(Default)') {\n        this.page = 1;\n        this.sort = 'date';\n        this.getInstaPost();\n      } else if (this.selected_cat === 'Most Engaged') {\n        this.page = 1;\n        this.sort = 'engaged';\n        this.getInstaPost();\n      }\n    }\n  },\n  created() {\n    this.getInstaPost();\n    this.getIndex();\n    this.loadMore();\n    this.previousPage();\n    this.filterSort();\n  },\n  filters: {\n    formatNumber: function (num) {\n      if (String(num).length < 4) {\n        return num;\n      } else if (String(num).length < 7) {\n        return Math.floor(num / 1000) + 'K';\n      } else if (String(num).length < 10) {\n        return Math.floor(num / 1000000) + 'M';\n      } else {\n        return Math.floor(num / 1000000000) + 'B';\n      }\n    }\n  }\n};","map":{"version":3,"names":["InstagramFollower","InstagramTotalPost","InstagramTotalLike","InstagramTotalComment","InstagramTotalEngagement","InstagramMostUsedHashtag","InstagramMostEngagedHashtag","InstagramThreadsFollower","name","components","data","InstaPost","page","perPage","sort","selected_cat","allLoaded","total_posts_count","subTotalNum","current_follower","past_follower","current_media","past_media","update_date","select_items","methods","getInstaPost","axios","get","SubTotals","columns","forEach","b","rowTotal","i","undefined","RowTotal","getIndex","loadMore","total_page","Math","ceil","previousPage","filterSort","created","filters","formatNumber","num","String","length","floor"],"sources":["src/views/Instagram.vue"],"sourcesContent":["<template>\r\n  <div class=\"main-body\">\r\n    <div class=\"main-content\">\r\n      <div class=\"section-stats\">\r\n        <div class=\"row align-items-center\">\r\n          <div class=\"col-xxl-12 col-xl-12 col-lg-12\">\r\n            <!-- Instagram Basic Numbers -->\r\n            <div class=\"row\">\r\n              <div class=\"col-lg-4\">\r\n                <div class=\"chart-box\" id=\"instagram-total-follower\">\r\n                  <div class=\"section-header\">\r\n                    <v-img\r\n                        src=\"https://mishkan-ltd.s3.ap-northeast-2.amazonaws.com/web-img/instagram-logo.svg\"\r\n                        max-height=\"30px\"\r\n                        max-width=\"30px\"\r\n                        class=\"mr-3\"\r\n                    ></v-img>\r\n                    <span>\r\n                      {{ $t('Instagram Follower') }}\r\n                      <v-tooltip bottom color=\"grey lighten-4\">\r\n                        <template v-slot:activator=\"{ on, attrs }\">\r\n                          <v-icon\r\n                              color=\"primary\"\r\n                              v-bind=\"attrs\"\r\n                              v-on=\"on\"\r\n                          >\r\n                          mdi-information-outline\r\n                          </v-icon>\r\n                        </template>\r\n                        <span>{{ $t(\"Number of followers on Instagram\") }}</span>\r\n                      </v-tooltip>\r\n                    </span>\r\n                  </div>\r\n                  <InstagramFollower/>\r\n                </div>\r\n              </div>\r\n              <div class=\"col-lg-4\">\r\n                <div class=\"chart-box\" id=\"instagram-threads-follower\">\r\n                  <div class=\"section-header\">\r\n                    <v-img\r\n                        src=\"https://mishkan-ltd.s3.ap-northeast-2.amazonaws.com/web-img/instagram-logo.svg\"\r\n                        max-height=\"30px\"\r\n                        max-width=\"30px\"\r\n                        class=\"mr-3\"\r\n                    ></v-img>\r\n                    <span>\r\n                      {{ $t('Instagram Threads Follower') }}\r\n                      <v-tooltip bottom color=\"grey lighten-4\">\r\n                        <template v-slot:activator=\"{ on, attrs }\">\r\n                          <v-icon\r\n                              color=\"primary\"\r\n                              v-bind=\"attrs\"\r\n                              v-on=\"on\"\r\n                          >\r\n                          mdi-information-outline\r\n                          </v-icon>\r\n                        </template>\r\n                        <span>{{ $t(\"Number of followers on Instagram Threads\") }}</span>\r\n                      </v-tooltip>\r\n                    </span>\r\n                  </div>\r\n                  <InstagramThreadsFollower/>\r\n                </div>\r\n              </div>\r\n              <div class=\"col-lg-4\">\r\n                <div class=\"chart-box\" id=\"instagram-total-post\">\r\n                  <div class=\"section-header\">\r\n                    <v-img\r\n                        src=\"https://mishkan-ltd.s3.ap-northeast-2.amazonaws.com/web-img/instagram-logo.svg\"\r\n                        max-height=\"30px\"\r\n                        max-width=\"30px\"\r\n                        class=\"mr-3\"\r\n                    ></v-img>\r\n                    <span>\r\n                      {{ $t('Instagram Posts') }}\r\n                      <v-tooltip bottom color=\"grey lighten-4\">\r\n                        <template v-slot:activator=\"{ on, attrs }\">\r\n                          <v-icon\r\n                              color=\"primary\"\r\n                              v-bind=\"attrs\"\r\n                              v-on=\"on\"\r\n                          >\r\n                          mdi-information-outline\r\n                          </v-icon>\r\n                        </template>\r\n                        <span>{{ $t(\"Number of posts on Instagram\") }}</span>\r\n                      </v-tooltip>\r\n                    </span>\r\n                  </div>\r\n                  <InstagramTotalPost/>\r\n                </div>\r\n              </div>\r\n              <div class=\"col-lg-4\">\r\n                <div class=\"chart-box\" id=\"instagram-total-like\">\r\n                  <div class=\"section-header\">\r\n                    <v-img\r\n                        src=\"https://mishkan-ltd.s3.ap-northeast-2.amazonaws.com/web-img/instagram-logo.svg\"\r\n                        max-height=\"30px\"\r\n                        max-width=\"30px\"\r\n                        class=\"mr-3\"\r\n                    ></v-img>\r\n                    <span>\r\n                      {{ $t('Instagram Likes') }}\r\n                      <v-tooltip bottom color=\"grey lighten-4\">\r\n                        <template v-slot:activator=\"{ on, attrs }\">\r\n                          <v-icon\r\n                              color=\"primary\"\r\n                              v-bind=\"attrs\"\r\n                              v-on=\"on\"\r\n                          >\r\n                          mdi-information-outline\r\n                          </v-icon>\r\n                        </template>\r\n                        <span>{{ $t(\"Number of likes on Instagram\") }}</span>\r\n                      </v-tooltip>\r\n                    </span>\r\n                  </div>\r\n                  <InstagramTotalLike/>\r\n                </div>\r\n              </div>\r\n              <div class=\"col-lg-4\">\r\n                <div class=\"chart-box\" id=\"instagram-total-comment\">\r\n                  <div class=\"section-header\">\r\n                    <v-img\r\n                        src=\"https://mishkan-ltd.s3.ap-northeast-2.amazonaws.com/web-img/instagram-logo.svg\"\r\n                        max-height=\"30px\"\r\n                        max-width=\"30px\"\r\n                        class=\"mr-3\"\r\n                    ></v-img>\r\n                    <span>\r\n                      {{ $t('Instagram Comments') }}\r\n                      <v-tooltip bottom color=\"grey lighten-4\">\r\n                        <template v-slot:activator=\"{ on, attrs }\">\r\n                          <v-icon\r\n                              color=\"primary\"\r\n                              v-bind=\"attrs\"\r\n                              v-on=\"on\"\r\n                          >\r\n                          mdi-information-outline\r\n                          </v-icon>\r\n                        </template>\r\n                        <span>{{ $t(\"Number of comments on Instagram\") }}</span>\r\n                      </v-tooltip>\r\n                    </span>\r\n                  </div>\r\n                  <InstagramTotalComment/>\r\n                </div>\r\n              </div>\r\n              <div class=\"col-lg-4\">\r\n                <div class=\"chart-box\" id=\"instagram-total-er\">\r\n                  <div class=\"section-header\">\r\n                    <v-img\r\n                        src=\"https://mishkan-ltd.s3.ap-northeast-2.amazonaws.com/web-img/instagram-logo.svg\"\r\n                        max-height=\"30px\"\r\n                        max-width=\"30px\"\r\n                        class=\"mr-3\"\r\n                    ></v-img>\r\n                    <span>\r\n                      {{ $t('Instagram Engagement Rate') }}\r\n                      <v-tooltip bottom color=\"grey lighten-4\">\r\n                        <template v-slot:activator=\"{ on, attrs }\">\r\n                          <v-icon\r\n                              color=\"primary\"\r\n                              v-bind=\"attrs\"\r\n                              v-on=\"on\"\r\n                          >\r\n                          mdi-information-outline\r\n                          </v-icon>\r\n                        </template>\r\n                        <span>{{ $t(\"Average engagement rate of Instagram posts\") }}</span>\r\n                      </v-tooltip>\r\n                    </span>\r\n                  </div>\r\n                  <InstagramTotalEngagement/>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"section-overall\">\r\n        <div class=\"section-title\">\r\n          <h2>Know Your Audience</h2>\r\n        </div>\r\n        <div class=\"row\">\r\n          <div class=\"col-lg-4 spacer\">\r\n            <div class=\"chart-box-2\">\r\n              <div class=\"section-header\">\r\n                <h3>Gender</h3>\r\n                <button class=\"dots\"></button>\r\n              </div>\r\n              <div class=\"chart\">\r\n                <img src=\"../assets/img/chart08.svg\" alt=\"\"/>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-lg-8 spacer\">\r\n            <div class=\"chart-box-2\">\r\n              <div class=\"section-header\">\r\n                <h3>Gender by Age</h3>\r\n                <button class=\"dots\"></button>\r\n              </div>\r\n              <div class=\"chart\">\r\n                <span><img src=\"../assets/img/chart09.svg\" alt=\"\"/></span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"row\">\r\n          <div class=\"col-lg-8 spacer\">\r\n            <div class=\"chart-box-2\">\r\n              <div class=\"section-header\">\r\n                <h3>Fan Location</h3>\r\n                <button class=\"dots\"></button>\r\n              </div>\r\n              <div class=\"row\">\r\n                <div class=\"col-md-6\">\r\n                  <div class=\"listing-title\">\r\n                    <h5>Top Countries</h5>\r\n                    <a href=\"#\">View more</a>\r\n                  </div>\r\n                  <div class=\"listing-block\">\r\n                    <p><img src=\"../assets/img/indonesia-flag.svg\" alt=\"\"/>Indonesia</p>\r\n                    <span>21.11%</span>\r\n                    <div class=\"percent-bar\">\r\n                      <div class=\"percent-value green\" style=\"width: 21.11%;\"></div>\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"listing-block\">\r\n                    <p><img src=\"../assets/img/south-korea-flag.svg\" alt=\"\"/>South Korea</p>\r\n                    <span>11.44%</span>\r\n                    <div class=\"percent-bar\">\r\n                      <div class=\"percent-value green\" style=\"width: 11.44%;\"></div>\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"listing-block\">\r\n                    <p><img src=\"../assets/img/philippines-flag.svg\" alt=\"\"/>Philippines</p>\r\n                    <span>8.91%</span>\r\n                    <div class=\"percent-bar\">\r\n                      <div class=\"percent-value green\" style=\"width: 8.91%;\"></div>\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"listing-block\">\r\n                    <p><img src=\"../assets/img/united-states-of-america-flag.svg\" alt=\"\"/>United States</p>\r\n                    <span>6.80%</span>\r\n                    <div class=\"percent-bar\">\r\n                      <div class=\"percent-value green\" style=\"width: 6.80%;\"></div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class=\"col-md-6\">\r\n                  <div class=\"listing-title\">\r\n                    <h5>Top Cities</h5>\r\n                    <a href=\"#\">View more</a>\r\n                  </div>\r\n                  <div class=\"listing-block\">\r\n                    <p><img src=\"../assets/img/south-korea-flag.svg\" alt=\"\"/>Seoul</p>\r\n                    <span>5.98%</span>\r\n                    <div class=\"percent-bar\">\r\n                      <div class=\"percent-value orange\" style=\"width: 21.11%;\"></div>\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"listing-block\">\r\n                    <p><img src=\"../assets/img/indonesia-flag.svg\" alt=\"\"/>Jakarta</p>\r\n                    <span>2.46%</span>\r\n                    <div class=\"percent-bar\">\r\n                      <div class=\"percent-value orange\" style=\"width: 2.46%;\"></div>\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"listing-block\">\r\n                    <p><img src=\"../assets/img/thailand-flag.svg\" alt=\"\"/>Bangkok</p>\r\n                    <span>1.61%</span>\r\n                    <div class=\"percent-bar\">\r\n                      <div class=\"percent-value orange\" style=\"width: 1.61%;\"></div>\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"listing-block\">\r\n                    <p><img src=\"../assets/img/japan-flag.svg\" alt=\"\"/>Tokyo</p>\r\n                    <span>1.06%</span>\r\n                    <div class=\"percent-bar\">\r\n                      <div class=\"percent-value orange\" style=\"width: 1.06%;\"></div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-lg-4 spacer\">\r\n            <div class=\"chart-box-2\">\r\n              <div class=\"section-header\">\r\n                <h3>Fan Language</h3>\r\n                <button class=\"dots\"></button>\r\n              </div>\r\n              <div class=\"row\">\r\n                <div class=\"col-12\">\r\n                  <div class=\"listing-title placeholder\">\r\n                  </div>\r\n                  <div class=\"listing-block\">\r\n                    <p>English</p>\r\n                    <span>42.20%</span>\r\n                    <div class=\"percent-bar\">\r\n                      <div class=\"percent-value teal\" style=\"width: 42.20%;\"></div>\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"listing-block\">\r\n                    <p>Indonesian</p>\r\n                    <span>8.85%</span>\r\n                    <div class=\"percent-bar\">\r\n                      <div class=\"percent-value teal\" style=\"width: 8.85%;\"></div>\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"listing-block\">\r\n                    <p>Spanish</p>\r\n                    <span>8.01%</span>\r\n                    <div class=\"percent-bar\">\r\n                      <div class=\"percent-value teal\" style=\"width: 8.01%;\"></div>\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"listing-block\">\r\n                    <p>Korean</p>\r\n                    <span>7.70%</span>\r\n                    <div class=\"percent-bar\">\r\n                      <div class=\"percent-value teal\" style=\"width: 7.70%;\"></div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"section-overall\">\r\n        <div class=\"section-title\">\r\n          <h2>{{ $t('Hashtags Analytics') }}</h2>\r\n        </div>\r\n        <div class=\"row\">\r\n          <div class=\"col-lg-6 spacer\">\r\n            <div class=\"chart-box-2\">\r\n              <div class=\"section-header\">\r\n                <v-img\r\n                    src=\"https://mishkan-ltd.s3.ap-northeast-2.amazonaws.com/web-img/hashtag.svg\"\r\n                    max-height=\"30px\"\r\n                    max-width=\"30px\"\r\n                    class=\"mr-3\"\r\n                ></v-img>\r\n                <span>\r\n                {{ $t('Top 10 Most-used Hashtags') }}\r\n                  <v-tooltip bottom color=\"grey lighten-4\">\r\n                <template v-slot:activator=\"{ on, attrs }\">\r\n                  <v-icon\r\n                      color=\"primary\"\r\n                      v-bind=\"attrs\"\r\n                      v-on=\"on\"\r\n                  >\r\n                    mdi-information-outline\r\n                  </v-icon>\r\n                </template>\r\n                <span>Daily trends of Spotify Followers</span>\r\n              </v-tooltip>\r\n                </span>\r\n              </div>\r\n              <div class=\"hash-list\">\r\n                <InstagramMostUsedHashtag/>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-lg-6 spacer\">\r\n            <div class=\"chart-box-2\">\r\n              <div class=\"section-header\">\r\n                <v-img\r\n                    src=\"https://mishkan-ltd.s3.ap-northeast-2.amazonaws.com/web-img/hashtag.svg\"\r\n                    max-height=\"30px\"\r\n                    max-width=\"30px\"\r\n                    class=\"mr-3\"\r\n                ></v-img>\r\n                <span>\r\n                {{ $t('Top 10 Most-engaged Hashtags') }}\r\n                  <v-tooltip bottom color=\"grey lighten-4\">\r\n                <template v-slot:activator=\"{ on, attrs }\">\r\n                  <v-icon\r\n                      color=\"primary\"\r\n                      v-bind=\"attrs\"\r\n                      v-on=\"on\"\r\n                  >\r\n                    mdi-information-outline\r\n                  </v-icon>\r\n                </template>\r\n                <span>Daily trends of Spotify Followers</span>\r\n              </v-tooltip>\r\n                </span>\r\n              </div>\r\n              <div class=\"hash-list\">\r\n                <InstagramMostEngagedHashtag/>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"section-latest-posts\">\r\n        <div class=\"section-title\">\r\n          <h2>{{ $t('All Posts') }}</h2>\r\n        </div>\r\n        <div class=\"filters\">\r\n          <v-row wrap justify=\"end\">\r\n            <v-col\r\n                cols=\"3\"\r\n            >\r\n              <v-select\r\n                :items=\"select_items\"\r\n                label=\"Sort By\"\r\n                dense\r\n                solo\r\n                v-model=\"selected_cat\"\r\n                @input=\"filterSort\"\r\n                item-color=\"orange darken-1\"\r\n              ></v-select>\r\n            </v-col>\r\n          </v-row>\r\n        </div>\r\n        <div class=\"row\">\r\n        <!--TODO Add Loading skeleton-->\r\n<!--          <div class=\"col-xl-3 col-lg-6 col-md-6\" v-if=\"!InstaPost.length\">-->\r\n<!--            <v-skeleton-loader-->\r\n<!--                type=\"image, list-item-two-line\"-->\r\n<!--            >-->\r\n<!--            </v-skeleton-loader>-->\r\n<!--          </div>-->\r\n\r\n          <div class=\"col-xl-3 col-lg-6 col-md-6\" v-for=\"(post, index) in InstaPost\"\r\n            v-if=\"index < total_posts_count\" :key=\"index\">\r\n            <a v-bind:href=\"post.url\" target=\"_blank\">\r\n            <div class=\"box2\" :style=\"{backgroundImage: 'url(' + post.image +')'}\">\r\n              <div class=\"box-body\">\r\n                <div class=\"infoStat\">\r\n                  <ul>\r\n                    <v-tooltip top color=\"grey lighten-4\">\r\n                      <template v-slot:activator=\"{ on }\">\r\n                        <li class=\"stat3\" v-on=\"on\">{{ post.like_count | formatNumber }}</li>\r\n                      </template>\r\n                      <span>{{ $t('Likes') }}: {{ (post.like_count).toLocaleString() }}</span>\r\n                    </v-tooltip>\r\n                    <v-tooltip bottom color=\"grey lighten-4\">\r\n                      <template v-slot:activator=\"{ on }\">\r\n                        <li class=\"stat2\" v-on=\"on\">{{ post.comment_count | formatNumber }}</li>\r\n                      </template>\r\n                      <span>{{ $t('Comments') }}: {{ (post.comment_count).toLocaleString() }}</span>\r\n                    </v-tooltip>\r\n                  </ul>\r\n                  <div class=\"right-side\">\r\n                    <span class=\"num\">{{ (post.RowTotal/ current_follower*100).toFixed(2)}}%</span>\r\n                    <span class=\"date\">{{ post.post_date }}</span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            </a>\r\n          </div>\r\n          <div class=\"col-12\">\r\n            <div class=\"button-block\">\r\n              <div class=\"filters\">\r\n                <v-row wrap justify=\"center\">\r\n                  <v-col\r\n                      cols=\"4\"\r\n                  >\r\n                    <v-btn\r\n                        class=\"button\"\r\n                        large\r\n                        icon\r\n                        :disabled=\"this.page === 1\"\r\n                        @click=\"previousPage()\"\r\n                    >\r\n                      <v-icon>\r\n                        mdi-chevron-left\r\n                      </v-icon>\r\n                    </v-btn>\r\n                    <v-btn\r\n                        class=\"button\"\r\n                        large\r\n                        icon\r\n                        @click=\"loadMore()\"\r\n                        :disabled=\"this.page === (this.total_posts_count / this.perPage) + 1\"\r\n                    >\r\n                      <v-icon>\r\n                        mdi-chevron-right\r\n                      </v-icon>\r\n                    </v-btn>\r\n                  </v-col>\r\n                </v-row>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport InstagramFollower from \"@/components/InstagramFollower\";\r\nimport InstagramTotalPost from \"@/components/InstagramTotalPost\";\r\nimport InstagramTotalLike from \"@/components/InstagramTotalLike\";\r\nimport InstagramTotalComment from \"@/components/InstagramTotalComment\";\r\nimport InstagramTotalEngagement from \"@/components/InstagramTotalEngagement\";\r\nimport InstagramMostUsedHashtag from \"@/components/InstagramMostUsedHashtag\";\r\nimport InstagramMostEngagedHashtag from \"@/components/InstagramMostEngagedHashtag\";\r\nimport InstagramThreadsFollower from \"@/components/InstagramThreadsFollower\";\r\nexport default {\r\n  name: \"Instagram\",\r\n  components: {\r\n    InstagramThreadsFollower,\r\n    InstagramMostEngagedHashtag,\r\n    InstagramMostUsedHashtag,\r\n    InstagramTotalEngagement,\r\n    InstagramTotalComment, InstagramTotalLike,\r\n    InstagramTotalPost, InstagramFollower},\r\n    data() {\r\n    return {\r\n      InstaPost: [],\r\n      page: 1,\r\n      perPage: 16,\r\n      sort: \"\",\r\n      selected_cat: \"\",\r\n      allLoaded: false,\r\n      total_posts_count: \"\",\r\n      subTotalNum: \"\",\r\n      current_follower: \"\",\r\n      past_follower: \"\",\r\n      current_media: \"\",\r\n      past_media: \"\",\r\n      update_date: \"\",\r\n      select_items: [\"Date(Default)\", \"Most Likes\", \"Most Comments\", \"Most Engaged\"]\r\n    }\r\n  },\r\n  methods: {\r\n    async getInstaPost() {\r\n      const {data} = await this.axios.get('http://localhost/api/instagram/post?' + 'page=' + this.page + '&limit=' + this.perPage + '&sort=' + this.sort)\r\n      this.page = data[\"result\"][\"page\"]\r\n      this.sort = data[\"result\"][\"sort\"]\r\n      this.total_posts_count = data[\"result\"][\"total_posts_count\"]\r\n      this.InstaPost = data[\"result\"][\"posts\"]\r\n      // console.log(this.sort)\r\n      //calculate subtotals\r\n      const SubTotals = {};\r\n      const columns = ['comment_count', 'like_count'];\r\n\r\n      this.InstaPost.forEach(b => {\r\n        let rowTotal = 0;\r\n        columns.forEach(i => {\r\n          if (b[i] === undefined) {\r\n            return;\r\n          }\r\n\r\n          SubTotals[i] = SubTotals[i] || 0;\r\n          SubTotals[i] += b[i];\r\n          rowTotal += b[i];\r\n        })\r\n        b.RowTotal = rowTotal;\r\n      });\r\n\r\n\r\n      // Calculate RowTotal for ColumnsTotals\r\n      columns.forEach(i => {\r\n        SubTotals.RowTotal = SubTotals.RowTotal || 0;\r\n        SubTotals.RowTotal += SubTotals[i];\r\n      })\r\n      this.subTotalNum = SubTotals.RowTotal\r\n      // console.log(this.subTotalNum)\r\n    },\r\n    async getIndex() {\r\n      const {data} = await this.axios.get(\"http://localhost/api/instagram/index\")\r\n      this.current_follower = data[\"result\"][0][\"follower_count\"]\r\n      this.past_follower = data[\"result\"][6][\"follower_count\"]\r\n      this.current_media = data[\"result\"][0][\"media_count\"]\r\n      this.past_media = data[\"result\"][6][\"media_count\"]\r\n      this.update_date = data[\"result\"][0][\"date\"]\r\n      // console.log(this.current_follower)\r\n    },\r\n    loadMore() {\r\n      this.page++;\r\n      let total_page = Math.ceil(this.total_posts_count/this.perPage)\r\n      // console.log(total_page)\r\n      if ((this.page) <= total_page) {\r\n        this.getInstaPost();\r\n      }\r\n    },\r\n    previousPage() {\r\n      this.page--\r\n      let total_page = Math.ceil(this.total_posts_count/this.perPage)\r\n      if ((this.page) <= total_page) {\r\n        this.getInstaPost();\r\n      }\r\n    },\r\n    filterSort() {\r\n      if (this.selected_cat === 'Most Likes') {\r\n        this.page = 1\r\n        this.sort = 'like'\r\n        this.getInstaPost();\r\n      } else if (this.selected_cat === 'Most Comments') {\r\n        this.page = 1\r\n        this.sort = 'comment'\r\n        this.getInstaPost();\r\n      } else if (this.selected_cat === 'Date(Default)') {\r\n        this.page = 1\r\n        this.sort = 'date'\r\n        this.getInstaPost();\r\n      } else if (this.selected_cat === 'Most Engaged') {\r\n        this.page = 1\r\n        this.sort = 'engaged'\r\n        this.getInstaPost();\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.getInstaPost();\r\n    this.getIndex();\r\n    this.loadMore();\r\n    this.previousPage();\r\n    this.filterSort();\r\n  },\r\n  filters: {\r\n    formatNumber: function (num) {\r\n      if (String(num).length < 4) {\r\n        return num;\r\n      } else if (String(num).length < 7) {\r\n        return Math.floor(num / 1000) + 'K';\r\n      } else if (String(num).length < 10) {\r\n        return Math.floor(num / 1000000) + 'M';\r\n      } else {\r\n        return Math.floor(num / 1000000000) + 'B';\r\n      }\r\n    }\r\n  },\r\n}\r\n</script>\r\n<style scoped>\r\n.chart-box {\r\n  width:100%;\r\n  height: 100%;\r\n  padding: 20px 10px;\r\n  background-color: #fff;\r\n  border: 1px solid #ddd;\r\n  border-radius: 8px;\r\n  -webkit-border-radius: 8px;\r\n}\r\n.index-box {\r\n  height: 100%;\r\n  width: 100%;\r\n  padding: 10px 20px;\r\n  text-align: center;\r\n  justify-content: center;\r\n  background-color: #fff;\r\n  border: 1px solid #ddd;\r\n  border-radius: 8px;\r\n  -webkit-border-radius: 8px;\r\n  padding-bottom: 20%;\r\n}\r\n\r\n.index-box .stat span {\r\n  display: inline-block;\r\n  font-size: 24px;\r\n  font-weight: 700;\r\n  white-space: nowrap;\r\n  padding-top: 10%;\r\n}\r\n\r\n.index-box .stat span:after {\r\n  content: '';\r\n  display: inline-block;\r\n  width: 16px;\r\n  height: 19px;\r\n  margin-left: 5px;\r\n  background-repeat: no-repeat;\r\n  background-position: center center\r\n}\r\n\r\n.index-box .stat span.up:after {\r\n  background-image: url('../assets/img/rec-arrow-up.svg')\r\n}\r\n\r\n.index-box .stat span.down:after {\r\n  background-image: url('../assets/img/rec-arrow-down.svg')\r\n}\r\n\r\n.index-box .stat span.same:after {\r\n  background-image: url('../assets/img/rec-arrow-same.svg')\r\n}\r\n\r\n.index-box p {\r\n  color: #767676;\r\n  font-size: 16px;\r\n  font-weight: 500;\r\n  margin: 0;\r\n  padding-top: 5px;\r\n}\r\n/*.button {*/\r\n/*  color: white;*/\r\n/*  font-size: 20px;*/\r\n/*  font-weight: 700;*/\r\n/*  background-color: #ffa2a2;*/\r\n/*  border: none;*/\r\n/*  padding: 14px 28px;*/\r\n/*  border-radius: 22px;*/\r\n/*  cursor: pointer;*/\r\n/*}*/\r\n/*.button:hover {*/\r\n/*  background-color: #fdadad;*/\r\n/*}*/\r\n/*.button:focus {*/\r\n/*  outline: none;*/\r\n/*}*/\r\n/*.button:active {*/\r\n/*  background-color: #ef8c8c;*/\r\n/*}*/\r\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}